# 战斗模拟器

一个功能完整的战斗模拟器，支持多角色配置和怪物刷新系统。

## 版本信息

- **当前版本**: v2.0.0
- **版本说明**: 重构装备系统，支持职业装备面板，按职业和部位选择装备

## 功能特性

### 角色系统（5个角色）
- ✅ **职业系统**：
  - 角色1：坦克（Tank）
  - 角色2：战士（Warrior）
  - 角色3、4：射手（Archer）
  - 角色5：辅助（Support）
- ✅ **装备系统**：
  - 支持上传Excel装备表（.xlsx、.xls格式）
  - 装备表字段：id、namecn、heroclass、type、hp、atk、def
  - 职业装备面板：每个职业4个部位（头、身、手、脚）
  - 每个部位只能选择对应职业和对应部位的装备
  - 装备属性累加（4个部位的装备属性相加）
  - 支持重新上传更新装备表
  - 装备数据本地存储，重启后保留
- ✅ 可配置基础攻击力、防御力、血量（不含装备加成）
- ✅ 最终属性 = 基础属性 + 装备加成
- ✅ 攻击速度固定为每秒1次
- ✅ **角色1（坦克）**：可配置减伤百分比（0-100%），减少受到的伤害
- ✅ **角色2、3、4（战士/射手）**：可配置技能伤害系数（百分比），增加造成的伤害
- ✅ **角色5（辅助）**：具有回血能力，为血量比例最少的角色恢复生命值（可配置回血速度）
- ✅ 实时显示HP条和存活状态
- ✅ 战斗过程中实时更新角色状态
- ✅ 战斗区域显示角色状态面板（当前血量和比例，包含职业信息）
- ✅ 受到攻击时显示飘字伤害数字动画

### 怪物系统
- ✅ 可配置每秒刷新数量（x个/秒）
- ✅ 可配置攻击力、防御力、血量、攻击速度
- ✅ 怪物匀速出现
- ✅ 自动攻击角色（优先攻击角色1，按1~5顺序依次攻击）

### 战斗系统
- ✅ 实时战斗模拟
- ✅ 战斗中可随时停止战斗
- ✅ **伤害公式**：
  - 角色对怪物：基础伤害 = 攻击力 - 怪物防御力（最小1点）
  - 角色2、3、4：最终伤害 = 基础伤害 × (1 + 技能伤害系数%)
  - 怪物对角色：基础伤害 = 怪物攻击力 - 角色防御力（最小1点）
  - 角色1：最终伤害 = 基础伤害 × (1 - 减伤百分比%)
- ✅ 界面显示当前应用的伤害公式说明
- ✅ 战斗日志实时显示（包含回血日志和伤害计算详情）
- ✅ 战斗统计（时长、击败数、伤害等）
- ✅ **首个角色死亡时间**：记录并显示第一个阵亡角色的死亡时间，自动保存到本地

### 方案管理
- ✅ 可保存角色和怪物配置为方案（最多10个）
- ✅ 方案本地存储，重启后自动加载
- ✅ 快速加载已保存的方案
- ✅ 方案删除功能
- ✅ **方案复制功能**：可复制现有方案创建新方案，便于基于旧方案修改
- ✅ **死亡时间记录**：每个方案独立记录首个角色死亡时间，切换方案时显示上次记录

### 界面功能
- ✅ 现代化UI设计
- ✅ 实时战斗数据展示
- ✅ 战斗日志滚动显示
- ✅ 角色和怪物状态可视化

## 使用方法

1. **配置角色**：在角色配置区域设置5个角色的属性
2. **配置怪物**：设置怪物刷新速度和属性
3. **开始战斗**：点击"开始战斗"按钮
4. **查看结果**：实时查看战斗日志和统计数据

## 战斗规则

- 角色攻击速度：每秒1次（固定）
- 怪物刷新：按配置的速率匀速出现
- 伤害计算：实际伤害 = 攻击力 - 防御力（最小为1）
- 战斗结束：所有角色阵亡时战斗结束

## 技术说明

- 纯前端实现，无需服务器
- 使用requestAnimationFrame实现流畅战斗循环
- 实时计算和显示战斗状态

## 版本历史

### v2.0.0 (当前版本)
- ✅ 重构装备系统，使用新的装备表格式
- ✅ 装备表字段：id（唯一标志）、namecn（中文名）、heroclass（职业）、type（部位）、hp（生命值）、atk（攻击力）、def（防御力）
- ✅ 新增职业装备面板，每个职业4个部位（头、身、手、脚）
- ✅ 每个部位只能选择对应职业和对应部位的装备
- ✅ 装备属性累加（4个部位的装备属性相加）
- ✅ 支持重新上传更新装备表
- ✅ 职业装备配置随方案保存和加载

### v1.9.0
- ✅ 增加装备表读取功能（支持Excel文件）
- ✅ 为每个角色添加装备选择下拉菜单
- ✅ 选择装备后自动应用生命值、攻击、防御加成
- ✅ 装备表数据本地存储，重启后自动加载
- ✅ 支持多种Excel列名格式（名称/name、生命值/hp、攻击/attack、防御/defense）

### v1.8.0
- ✅ 角色增加职业属性（坦克、战士、射手、辅助）
- ✅ 角色1设定为坦克
- ✅ 角色2设定为战士
- ✅ 角色3、4设定为射手
- ✅ 角色5设定为辅助
- ✅ 角色配置界面和状态面板显示职业信息

### v1.7.0
- ✅ 首个角色死亡时间保存到当前方案内
- ✅ 切换方案时自动显示该方案上次的首个角色死亡时间
- ✅ 每个方案独立记录死亡时间

### v1.6.0
- ✅ 增加方案复制功能，可复制现有方案创建新方案
- ✅ 方案上限从5个提升至10个
- ✅ 方案列表增加复制按钮

### v1.5.0
- ✅ 修复方案保存和更新逻辑（解决方案2无法保存的问题）
- ✅ 角色2增加技能伤害系数配置（现在角色2、3、4都有技能伤害）
- ✅ 每次战斗后显示第一个角色死亡时间
- ✅ 首个角色死亡时间自动保存到本地存储

### v1.4.0
- ✅ 方案管理增加新建方案按钮
- ✅ 角色1增加减伤百分比配置（0-100%）
- ✅ 角色3、角色4增加技能伤害系数（百分比加成）
- ✅ 显示当前应用的伤害公式说明

### v1.3.0
- ✅ 角色属性和怪物属性配置可保存为方案
- ✅ 最多支持5个方案，本地存储
- ✅ 每次重启程序自动读取上次使用的方案
- ✅ 方案管理界面（保存、加载、删除）

### v1.2.0
- ✅ 角色5回血能力改为为血量比例最少的角色恢复
- ✅ 怪物攻击逻辑改为优先攻击角色1，按1~5顺序依次攻击
- ✅ 下方增加当前角色及血量的状态面板
- ✅ 角色被攻击时显示飘字伤害数字动画

### v1.1.0
- ✅ 添加战斗中的停止按钮
- ✅ 角色5增加回血能力，每秒恢复x点（可配置）
- ✅ 优化战斗控制功能

### v1.0.0 (初始版本)
- 实现5个角色的配置和战斗
- 实现怪物刷新系统
- 实现基础战斗逻辑
- 实现战斗日志和统计
